# 🚀 快速启动后端服务

## ✅ 项目已成功配置！

项目已成功降级到 .NET 8.0 并构建完成。

---

## 📝 启动步骤

### **第一步：启动 Docker Desktop**

1. 在 Windows 开始菜单搜索 "Docker Desktop"
2. 点击启动，等待 Docker 完全启动（系统托盘图标不再转圈）
3. 确认 Docker 运行正常

### **第二步：启动数据库服务**

在 PowerShell 中执行：

```powershell
cd D:\SourceCode\CSharpProject\WebAPI\UserService
docker-compose up -d
```

这会启动：
- ✅ PostgreSQL (端口 5432)
- ✅ Redis (端口 6379)

### **第三步：启动后端 API 服务**

#### **启动 ProblemSetService（题目和判题服务）**

```powershell
cd D:\SourceCode\CSharpProject\WebAPI\UserService\ProblemSetService
dotnet run
```

启动成功后访问：**http://localhost:5272/swagger**

#### **启动 UserService（用户服务）** - 可选

打开**新的** PowerShell 窗口：

```powershell
cd D:\SourceCode\CSharpProject\WebAPI\UserService\UserService
dotnet run
```

启动成功后访问：**http://localhost:5170/swagger**

---

## 📊 服务信息

| 服务名称 | 端口 | Swagger 文档 |
|---------|------|-------------|
| ProblemSetService | 5272 | http://localhost:5272/swagger |
| UserService | 5170 | http://localhost:5170/swagger |
| PostgreSQL | 5432 | - |
| Redis | 6379 | - |

---

## 🛑 停止服务

**停止数据库：**
```powershell
docker-compose down
```

**停止 API 服务：**
在运行服务的终端按 `Ctrl + C`

---

## 💡 提示

- 首次启动可能需要下载 Docker 镜像，请耐心等待
- 确保端口 5432、6379、5170、5272 没有被其他程序占用
- Swagger UI 提供完整的 API 测试界面
- 数据会持久化存储在 Docker Volume 中

---

## ❓ 遇到问题？

**Docker 无法连接：**
- 确保 Docker Desktop 已完全启动
- 检查 Windows 服务中 Docker 相关服务是否运行

**端口被占用：**
```powershell
netstat -ano | findstr "5272"  # 查看端口占用
```

**数据库连接失败：**
```powershell
docker ps  # 确认容器运行状态
docker logs initialthink-postgres  # 查看 PostgreSQL 日志
docker logs initialthink-redis     # 查看 Redis 日志
```

